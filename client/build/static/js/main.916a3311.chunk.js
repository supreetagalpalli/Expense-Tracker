(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{45:function(e,t,a){e.exports=a(77)},50:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(25),s=a.n(l),o=(a(50),a(3)),c=a(4),i=a(7),m=a(5),u=a(8),p=a(2),d=a(20),h=a(27),E=a.n(h),v=a(16),f=a.n(v),b=function(e){e?f.a.defaults.headers.common.Authorization=e:delete f.a.defaults.headers.common.Authorization},g=function(e){return{type:"SET_CURRENT_USER",payload:e}},N=function(){return function(e){localStorage.removeItem("jwtToken"),b(!1),e(g({}))}},y=a(6),O=a(19),w=a(43),x=a(22),j=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},S={isAuthenticated:!1,user:{}},C={},k={expenses:null,selectedExpense:null,loading:!1},_=Object(O.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(x.a)({},e,{isAuthenticated:!j(t.payload),user:t.payload});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},expenses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EXPENSE_LOADING":return Object(x.a)({},e,{loading:!0});case"GET_EXPENSES":return Object(x.a)({},e,{expenses:t.payload,loading:!1});case"EDIT_EXPENSES":return e;case"DELETE_EXPENSES":return Object(x.a)({},e,{expenses:e.expenses.filter(function(e){return e._id!==t.payload}),loading:!1});case"CLEAR_CURRENT_EXPENSES":return{expenses:null};default:return e}}}),D=[w.a],R=Object(O.e)(_,{},Object(O.d)(O.a.apply(void 0,D),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),T=function(){return{type:"CLEAR_CURRENT_EXPENSES"}},A=function(){return{type:"EXPENSE_LOADING"}},U=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onLogoutClick",value:function(e){e.preventDefault(),this.props.clearCurrentExpenses(),this.props.logoutUser(),window.location.href="/login"}},{key:"render",value:function(){var e=this.props.auth.isAuthenticated,t=r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"#",onClick:this.onLogoutClick.bind(this),className:"nav-link"},"Logout"))),a=r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{className:"nav-link",to:"/register"},"Sign Up")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{className:"nav-link",to:"/login"},"Login")));return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark mb-4"},r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#mobile-nav"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"mobile-nav"},e?t:a)))}}]),t}(n.Component),L=Object(y.b)(function(e){return{auth:e.auth}},{logoutUser:N,clearCurrentExpenses:T})(U),P=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/expense")}},{key:"render",value:function(){return r.a.createElement("div",{className:"landing"},r.a.createElement("div",{className:"dark-overlay landing-inner text-light"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h1",{className:"display-3 mb-4"}," Expense Manager"),r.a.createElement("hr",null),r.a.createElement(p.b,{to:"/register",className:"btn btn-lg btn-info mr-2"},"Sign Up"),r.a.createElement(p.b,{to:"/login",className:"btn btn-lg btn-light"},"Login"))))))}}]),t}(n.Component),Y=Object(y.b)(function(e){return{auth:e.auth}},{})(P),X=a(23),G=a.n(X),M=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={totalExpense:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getCurrentExpenses()}},{key:"onDeleteClick",value:function(e){this.props.deleteExpense(e)}},{key:"render",value:function(){var e=this,t=this.props.expenses.expenses,a=this.props.auth.user;if(console.log(a),this.props.auth.isAuthenticated){if(t){var n=t.reduce(function(e,t){return e+t.price},0);return console.log(n),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("h2",null,"Expenses")),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("h2",null,"Total:$",n/100))),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",{className:"thead-inverse"},r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map(function(t){return r.a.createElement("tr",{key:t._id},r.a.createElement("td",null,t.title),r.a.createElement("td",null,"$",t.price/100),r.a.createElement("td",null,t.category),r.a.createElement("td",null,G.a.utc(t.date).format("YYYY-MM-DD")),r.a.createElement("td",null,r.a.createElement(p.b,{to:"/expense/".concat(t._id),className:"btn"},r.a.createElement("i",{className:"far fa-edit"}))),r.a.createElement("td",null,r.a.createElement("button",{className:"btn",onClick:function(){return e.onDeleteClick(t._id)}},r.a.createElement("i",{className:"far fa-trash-alt"}))))}))))}return r.a.createElement("h1",null,"Loading..")}return window.location.href="/"}}]),t}(n.Component),I=Object(y.b)(function(e){return{auth:e.auth,expenses:e.expenses}},{getCurrentExpenses:function(){return function(e){e(A()),f.a.get("/api/expenses/expense").then(function(t){return e({type:"GET_EXPENSES",payload:t.data})}).catch(function(t){return e({type:"GET_EXPENSES",payload:{}})})}},deleteExpense:function(e){return function(t){f.a.delete("/api/expenses/expense/".concat(e)).then(function(a){t({type:"DELETE_EXPENSES",payload:e})}).catch(function(e){return t({type:"GET_EXPENSES",payload:e.response.data})})}},clearCurrentExpenses:T,logoutUser:N})(M),F=function(){return r.a.createElement(p.b,{to:"/add",className:"btn btn-success btn-black"},r.a.createElement("i",{className:"fas fa-plus"})," New")},V=function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("br",null)),r.a.createElement("div",{className:"col-md-8"},r.a.createElement(I,null)),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(F,null)))},B=a(15),q=a(18),W=a(21),$=a.n(W),z=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).state={name:"",email:"",password:"",password2:"",errors:{}},e.onChange=e.onChange.bind(Object(q.a)(e)),e.onSubmit=e.onSubmit.bind(Object(q.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/expense")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"onChange",value:function(e){this.setState(Object(B.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={name:this.state.name,email:this.state.email,password:this.state.password,password2:this.state.password2};this.props.registerUser(t,this.props.history)}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"register"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h1",{className:"display-4 text-center"},"Sign Up"),r.a.createElement("p",{className:"lead text-center"},"Create your account"),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:$()("form-control form-control-lg",{"is-invalid":e.name}),placeholder:"Name",name:"name",value:this.state.name,onChange:this.onChange}),e.name&&r.a.createElement("div",{className:"invalid-feedback"},e.name)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:$()("form-control form-control-lg",{"is-invalid":e.email}),placeholder:"Email Address",name:"email",value:this.state.email,onChange:this.onChange}),e.email&&r.a.createElement("div",{className:"invalid-feedback"},e.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:$()("form-control form-control-lg",{"is-invalid":e.password}),placeholder:"Password",name:"password",value:this.state.password,onChange:this.onChange}),e.password&&r.a.createElement("div",{className:"invalid-feedback"},e.password)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:$()("form-control form-control-lg",{"is-invalid":e.password2}),placeholder:"Confirm Password",name:"password2",value:this.state.password2,onChange:this.onChange}),e.password2&&r.a.createElement("div",{className:"invalid-feedback"},e.password2)),r.a.createElement("input",{type:"submit",className:"btn btn-info btn-block mt-4"}))))))}}]),t}(n.Component),J=Object(y.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){f.a.post("/api/users/register",e).then(function(e){return t.push("/login")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(d.e)(z)),H=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).state={email:"",password:"",errors:{}},e.onChange=e.onChange.bind(Object(q.a)(e)),e.onSubmit=e.onSubmit.bind(Object(q.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/expense")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/expense"),e.errors&&this.setState({errors:e.errors})}},{key:"onChange",value:function(e){this.setState(Object(B.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,password:this.state.password};this.props.loginUser(t)}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h1",{className:"display-4 text-center"},"Log In"),r.a.createElement("p",{className:"lead text-center"},"Sign in to your account"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:$()("form-control form-control-lg",{"is-invalid":e.email}),placeholder:"Email Address",name:"email",value:this.state.email,onChange:this.onChange}),e.email&&r.a.createElement("div",{className:"invalid-feedback"},e.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:$()("form-control form-control-lg",{"is-invalid":e.password}),placeholder:"Password",name:"password",value:this.state.password,onChange:this.onChange}),e.password&&r.a.createElement("div",{className:"invalid-feedback"},e.password)),r.a.createElement("input",{type:"submit",className:"btn btn-info btn-block mt-4"}))))))}}]),t}(n.Component),K=Object(y.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){f.a.post("/api/users/login",e).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),b(a);var n=E()(a);t(g(n))}).catch(function(e){return t({type:"GET_ERRORS",payload:e.response.data})})}}})(H),Q=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",price:"",category:"",date:""},a.onSubmit=function(e){e.preventDefault();var t={title:a.state.title,price:100*a.state.price,category:a.state.category,date:a.state.date};a.props.addExpense(t,a.props.history)},a.onChange=function(e){a.setState(Object(B.a)({},e.target.name,e.target.value))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.auth.isAuthenticated?r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(p.b,{to:"/expense",className:"btn btn-link"},r.a.createElement("i",{className:"fas fa-arrow-circle-left"})," Back to Expenses"))),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},"Add Expense"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",className:"form-control",name:"title",minLength:"2",required:!0,onChange:this.onChange,value:this.state.title})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{type:"number",className:"form-control",name:"price",minLength:"2",required:!0,onChange:this.onChange,value:this.state.price})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{value:this.state.category,onChange:this.onChange,name:"category",required:!0,className:"form-control"},r.a.createElement("option",{disabled:!0,value:"",hidden:!0},"Select a Category"),r.a.createElement("option",{value:"groceries"},"Groceries"),r.a.createElement("option",{value:"utilities"},"Utilities"),r.a.createElement("option",{value:"travel"},"Travel"),r.a.createElement("option",{value:"beauty"},"Beauty"),r.a.createElement("option",{value:"restaurant"},"Restaurant"),r.a.createElement("option",{value:"shopping"},"Shopping"),r.a.createElement("option",{value:"other"},"Other"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement("input",{type:"date",className:"form-control",name:"date",required:!0,onChange:this.onChange,value:this.state.date})),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-block"}))))):window.location.href="/"}}]),t}(n.Component),Z=Object(y.b)(function(e){return{expenses:e.expenses,auth:e.auth}},{addExpense:function(e,t){return function(a){f.a.post("/api/expenses/expense/add",e).then(function(e){return t.push("/expense")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Q),ee=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={title:a.props.expense.title,price:a.props.expense.price/100,category:a.props.expense.category,date:G.a.utc(a.props.expense.date).format("YYYY-MM-DD")},a.onSubmit=function(e){e.preventDefault();var t={title:a.state.title,price:100*a.state.price,category:a.state.category,date:a.state.date};a.props.editExpense(t,a.props.history,a.props.match.params.id)},a.onChange=function(e){a.setState(Object(B.a)({},e.target.name,e.target.value))},a.onChangeDate=function(e){a.setState(Object(B.a)({},e.target.name,G()(e.target.value).format("YYYY-MM-DD")))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(p.b,{to:"/expense",className:"btn btn-link"},r.a.createElement("i",{className:"fas fa-arrow-circle-left"})," Back to Expenses"))),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},"Edit Expense"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",className:"form-control",name:"title",minLength:"2",defaultValue:this.state.title,value:this.props.title,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{type:"number",className:"form-control",name:"price",minLength:"2",defaultValue:this.state.price,onChange:this.onChange,value:this.props.price})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{defaultValue:this.state.category,onChange:this.onChange,value:this.props.category,placeholder:"Select a category",name:"category",required:!0,className:"form-control"},r.a.createElement("option",{value:"groceries"},"Groceries"),r.a.createElement("option",{value:"utilities"},"Utilities"),r.a.createElement("option",{value:"travel"},"Travel"),r.a.createElement("option",{value:"beauty"},"Beauty"),r.a.createElement("option",{value:"restaurant"},"Restaurant"),r.a.createElement("option",{value:"shopping"},"Shopping"),r.a.createElement("option",{value:"other"},"Other"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement("input",{className:"form-control",name:"date",type:"date",defaultValue:G()(this.state.date).format("YYYY-MM-DD"),onChange:this.onChangeDate,value:this.props.date})),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary btn-block"})))))}}]),t}(n.Component),te=Object(y.b)(function(e,t){return{expense:e.expenses.expenses.filter(function(e){return e._id===t.match.params.id})[0]}},{editExpense:function(e,t,a){return function(n){f.a.put("/api/expenses/expense/".concat(a),e).then(function(e){return t.push("/expense")}).catch(function(e){return n({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(d.e)(ee));a(76);if(localStorage.jwtToken){b(localStorage.jwtToken);var ae=E()(localStorage.jwtToken);R.dispatch(g(ae));var ne=Date.now()/1e3;ae.exp<ne&&(R.dispatch(N()),window.location.href="/login")}var re=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,{store:R},r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(L,null),r.a.createElement(d.a,{exact:!0,path:"/",component:Y}),r.a.createElement("div",{className:"container"},r.a.createElement(d.a,{exact:!0,path:"/register",component:J}),r.a.createElement(d.a,{exact:!0,path:"/login",component:K}),r.a.createElement(d.a,{exact:!0,path:"/expense",component:V}),r.a.createElement(d.a,{exact:!0,path:"/add",component:Z}),r.a.createElement(d.a,{exact:!0,path:"/expense/:id",component:te})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[45,1,2]]]);
//# sourceMappingURL=main.916a3311.chunk.js.map